{% extends "base_angular.html" %}
{% load cms_tags static sekizai_tags%}
{% block title %}Tools & Applications{% endblock %}
{% block content %}

<div id="apps-root"></div>
{% if not react_flag %}
<div class="container">
    <h1 class="headline headline-research">
        <span class="hl hl-research">Tools & Applications</span>
    </h1>
    <div>
        <a href="{% url 'pages-details-by-slug' slug='rw/user-guide/workspace' %}"><i role="none" class="fa fa-question-circle"></i> Learn About <b>Tools & Applications.</b></a>
    </div>
</div>

<div class="container" role="main" id="workspace">
  <div><apptray></apptray></div>
  <div class="workspace-panel-container">
    <div
         class="workspace-panel workspace-panel-sidebar workspace-panel-sidebar-left"
         ng-class="{'workspace-panel-collapsed': panel.collapsed}">
         <workspace-data-browser></workspace-data-browser>
        </div>
    <div ng-controller="ApplicationFormCtrl"
         ng-include="'{% static "scripts/workspace/html/application-form.html" %}'"
         class="workspace-panel workspace-panel-main"></div>
    <div ng-controller="JobsStatusCtrl"
         ng-include="'{% static "scripts/workspace/html/jobs-status.html" %}'"
         class="workspace-panel workspace-panel-sidebar workspace-panel-sidebar-right"
         ng-class="{'workspace-panel-collapsed': panel.collapsed}"
         ng-init="panel.collapsed = true"></div>
  </div>
</div>
{% endif %}

{% addtoblock "css" %}
<link href="{% static 'scripts/workspace/styles/workspace.css' %}" rel="stylesheet">
{% endaddtoblock %}

{% addtoblock "js" %}
<script type="text/javascript" src="{% static 'vendor/tv4/tv4.js' %}"></script>
<script type="text/javascript" src="{% static 'vendor/objectpath/lib/ObjectPath.js' %}"></script>
<script type="text/javascript" src="{% static 'vendor/angular-schema-form/dist/schema-form.js' %}"></script>
<script type="text/javascript" src="{% static 'vendor/angular-schema-form/dist/bootstrap-decorator.js' %}"></script>
<script type="text/javascript" src="{% static 'vendor/angular-xeditable/dist/js/xeditable.js' %}"></script>
<script src="{% static 'vendor/angular-ui-codemirror/src/ui-codemirror.js' %}"></script>
{% endaddtoblock %}

{% addtoblock "js" %}
<script src="{% static 'scripts/applications/services/apps-wizard-service.js' %}"></script>
<script src="{% static 'scripts/workspace/directives/asf-agave-file-picker.js' %}"></script>
<script src="<%= htmlWebpackPlugin.files.js %>"></script>
{% endaddtoblock %}

{% addtoblock "js" %}
{% if debug and react_flag %}
<script type="module">
    import RefreshRuntime from 'https://designsafe.dev:4200/static/@react-refresh';
    RefreshRuntime.injectIntoGlobalHook(window);
    window.$RefreshReg$ = () => {};
    window.$RefreshSig$ = () => (type) => type;
    window.__vite_plugin_react_preamble_installed__ = true;
  </script>
  <script type="module" src="https://designsafe.dev:4200/static/@vite/client"></script>
  <script type="module" src="https://designsafe.dev:4200/static/src/main.tsx"></script>
{% else %}
<!--TODO: setup non-dev static import for React code-->
{% endif %}
{% endaddtoblock %}

{% endblock %}