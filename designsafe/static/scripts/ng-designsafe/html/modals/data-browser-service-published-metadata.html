<div class="modal-header">
    <h3 class="modal-title">Metadata</h3>
</div>
<div class="modal-body">
<h3>{{data.file.metadata.project.title}}</h3>
<uib-tabset active="active">
    <uib-tab index="0" heading="Project">
        <div class="table-responsive">
            <table class="table">
                <thead>
                    <tr>
                        <th></th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-if="data.file.metadata.project.title">
                        <td>
                            Title
                        </td>
                        <td>
                            {{data.file.metadata.project.title}}
                        </td>
                    </tr>
                    <tr ng-if="data.file.metadata.project.name">
                        <td>
                            Name
                        </td>
                        <td>
                            {{data.file.metadata.project.name}}
                        </td>
                    </tr>
                    <tr ng-if="data.file.metadata.project.pis">
                        <td>
                            PIs
                        </td>
                        <td>
                            <div ng-repeat="pi in data.file.metadata.project.pis | orderBy: 'firstName'">
                                {{pi.firstName}} {{pi.lastName}}
                                <br>
                            </div>
                        </td>
                    </tr>
                    <tr ng-if="data.file.metadata.project.organization">
                        <td>
                            Organization
                        </td>
                        <td>

                            <div ng-repeat="organization in data.file.metadata.project.organization">
                                {{organization.name}}
                                <br> {{organization.state}}
                                <br> {{organization.country}}
                                <br>
                            </div>
                        </td>
                    </tr>
                    <tr ng-if="data.file.metadata.project.description">
                        <td>
                            Description
                        </td>
                        <td>
                            {{data.file.metadata.project.description}}
                        </td>
                    </tr>
                    <tr ng-if="data.file.metadata.project.sponsor">
                        <td>
                            Sponsor
                        </td>
                        <td>
                            <div ng-repeat="sponsor in data.file.metadata.project.sponsor">
                                <a ng-href="{{sponsor.url}}" target="_blank">{{sponsor.name}}</a>
                            </div>
                        </td>
                    </tr>
                    <tr ng-if="data.file.metadata.project.publications">
                        <td>
                            Publications
                        </td>
                        <td>
                            <div ng-repeat="publication in data.file.metadata.project.publications">
                                <strong>{{publication.title}}</strong><br>
                                <div ng-repeat="author in publication.authors">
                                  {{author}}
                                </div>
                                <br>
                            </div>
                        </td>
                    </tr>
                    <tr ng-if="data.file.metadata.project.startDate">
                        <td>
                            Start Date
                        </td>
                        <td>
                            {{data.file.metadata.project.startDate}}
                        </td>
                    </tr>
                    <tr ng-if="data.file.metadata.project.endDate">
                        <td>
                            End Date
                        </td>
                        <td>
                            {{data.file.metadata.project.endDate}}
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </uib-tab>
    <uib-tab index="$index + 1" ng-repeat="tab in tabs" heading="{{tab.title}}" active="tab.active" disable="tab.disabled">
        {{tab.content}}
    </uib-tab>
    <uib-tab index="3">
        <uib-tab-heading>Experiments
        </uib-tab-heading>
        <div class="table-responsive">
            <table class="table">
                <thead>
                    <tr>
                        <th class="col-lg-2"></th>
                        <th class="col-lg-10"></th>
                    </tr>
                </thead>
                <tbody ng-repeat="experiment in data.file.metadata.experiments | orderBy: nameOrder">
                    <tr>
                        <td class="col-lg-2">{{experiment.name}}</td>
                        <td class="col-lg-10">
                            <table class="table table-borderless">
                                <thead>
                                    <tr>
                                        <th></th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-if="experiment.title">
                                        <td>
                                            Title
                                        </td>
                                        <td>
                                            {{experiment.title}}
                                        </td>
                                    </tr>
                                    <tr ng-if="experiment.creators">
                                        <td>
                                            Creators
                                        </td>
                                        <td>
                                            <div ng-repeat="creator in experiment.creators | orderBy: 'firstName'">
                                                {{creator.firstName}} {{creator.lastName}}
                                                <br>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr ng-if="experiment.doi">
                                        <td>
                                            DOI
                                        </td>
                                        <td>
                                            {{experiment.doi}}
                                        </td>
                                    </tr>
                                    <tr ng-if="experiment.type">
                                        <td>
                                            Type
                                        </td>
                                        <td>
                                            {{experiment.type}}
                                        </td>
                                    </tr>
                                    <tr ng-if="experiment.description">
                                        <td>
                                            Description
                                        </td>
                                        <td>
                                            {{experiment.description}}
                                        </td>
                                    </tr>
                                    <tr ng-if="experiment.startDate">
                                        <td>
                                            Start Date
                                        </td>
                                        <td>
                                            {{experiment.startDate}}
                                        </td>
                                    </tr>
                                    <tr ng-if="experiment.endDate">
                                        <td>
                                            End Date
                                        </td>
                                        <td>
                                            {{experiment.endDate}}
                                        </td>
                                    </tr>
                                    <tr ng-if="experiment.equipment">
                                        <td>
                                            Equipment
                                        </td>
                                        <td>
                                            <div class="table-responsive">
                                                <table class="table table-borderless">
                                                    <thead>
                                                        <tr>
                                                            <th>Equipment</th>
                                                            <th>Component</th>
                                                            <th>Equipment Class</th>
                                                            <th>Facility</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr ng-repeat="equipment in experiment.equipment">
                                                            <td>
                                                                {{equipment.equipment}}
                                                            </td>
                                                            <td>
                                                                {{equipment.component}}
                                                            </td>
                                                            <td>
                                                                {{equipment.equipmentClass}}
                                                            </td>
                                                            <td>
                                                                {{equipment.facility}}
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr ng-if="experiment.material">
                                        <td>
                                            Material
                                        </td>
                                        <td>

                                            <div ng-repeat="materials in experiment.material">
                                                <div>
                                                    {{materials.component}}:
                                                </div>
                                                <div ng-repeat="material in materials.materials">
                                                    {{material}}
                                                    <br>
                                                </div>
                                                <br>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr ng-if="experiment.path">
                                        <td>
                                            Files
                                        </td>
                                        <td>
                                          <a fm-draggable data-agave-href = "agave://nees.public/{{experiment.path}}"
                                             href="/data/browser/public/nees.public/{{experiment.path}}"
                                             target="_blank"
                                             title="some title" class="file-folder">
                                             <i class="glyphicon glyphicon-folder-close"></i>
                                              /{{experiment.path}}
                                           </a>
                                        </td>
                                    </tr>

                                </tbody>
                            </table>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </uib-tab>
</uib-tabset>
</div>
