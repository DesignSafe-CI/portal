<div style="background:white; padding-top: 20px">
    <!-- progression map -->
    <div class="pull-right" style="padding-bottom: 20px;">
        <a ng-click="$ctrl.goWork()">
            <i role="none" class="fa fa-times"></i> Exit Prepare to Publish
        </a>
    </div>
    <table class="tg" style="table-layout: fixed; width: 100%; padding-bottom: 15px;">
        <tr style="text-align: center">
            <td class="tg-0lax">
                <strong>Selection</strong>
                <div>
                    <i role="none" class="fa fa-circle" style="color:#1CB500;"></i>
                </div>
            </td>
            <td class="tg-0lax">
                <strong>Proofread Project</strong>
                <div>
                    <i role="none" class="fa fa-circle-thin"></i>
                </div>
            </td>
            <td class="tg-0lax">
                <strong>Proofread Data</strong>
                <div>
                    <i role="none" class="fa fa-circle-thin"></i>
                </div>
            </td>
            <td class="tg-0lax">
                <strong>Order Authors</strong>
                <div>
                    <i role="none" class="fa fa-circle-thin"></i>
                </div>
            </td>
            <td class="tg-0lax">
                <strong>Licenses</strong>
                <div>
                    <i role="none" class="fa fa-circle-thin"></i>
                </div>
            </td>
        </tr>
    </table>
    <br>
    <div>
        <a class="pull-left" ng-click="$ctrl.goPreview()"><i role="none" class="fa fa-arrow-left"></i> Back to Publication
            Preview</a>
        <button class="btn btn-add pull-right" ng-click="$ctrl.goProject()" ng-disabled="!$ctrl.selectedListing.listing.length">Continue</button>
    </div>
    <!-- progression map -->
    <div style="padding-top: 40px; padding-bottom: 40px;">
        <p>
            <h3 style="text-align: center">Select what you want to publish</h3>
            <li>You may only select files from one directory.</li>
            <li>Select the files you wish to publish and click "Save Selections".</li>
            <li>If you want to deselect individual files, deselect the checkboxes.</li>
            <li>If you need help, attend <a href="/facilities/virtual-office-hours/" target="_blank" aria-describedby="msg-open-new-window">Curation office hours</a> for help with publishing.</li>
        </p>
    </div>
        <!-- file selection -->
        <div ng-if="$ctrl.ui.loading">
            <h3 class="text-center">
                <i role="none" class="fa fa-spinner fa-spin"></i> Loading...
            </h3>
        </div>
        <div ng-if="!$ctrl.ui.loading">
            <div ng-if="$ctrl.selectedListing">
                <div class="pipeline-nav">
                    <h3>These files will be published</h3>
                    <button class="btn btn-danger" ng-click="$ctrl.undoSelections()">Undo Selections</button>
                </div>
                <files-listing listing=$ctrl.selectedListing show-tags="true" on-browse="$ctrl.onBrowse(file)"></files-listing>
            </div>
            <div ng-if="!$ctrl.selectedListing">
                <div class="pipeline-nav">
                    <h3>Select files</h3>
                    <button class="btn btn-primary" ng-click="$ctrl.saveSelections()">Save Selections</button>
                </div>
                <breadcrumb
                    path="$ctrl.FileListingService.listings.main.params.path"
                    system="$ctrl.FileListingService.listings.main.params.path"
                    on-browse="$ctrl.onBrowse(file)"
                    custom-root="{label: $ctrl.project.value.projectId, path: ''}"
                ></breadcrumb>
                <files-listing listing="$ctrl.FileListingService.listings.main" show-select="true" show-tags="true" on-browse="$ctrl.onBrowse(file)"></files-listing>
            </div>
        </div>
    </div>
</div>
