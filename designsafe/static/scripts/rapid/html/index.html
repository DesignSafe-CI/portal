<div id="rapid_main">
  <div class="text-center" ng-show="!vm.show_filter_options">
    <button class="btn-link-alt filter-options-button" ng-click="vm.show_filter_options=true"> Show filter options </button>
  </div>
  <div class="filter-options slide-in" ng-show="vm.show_filter_options">
    <div class="filter-container">
        <div class="filter-options">
        <label> Event Type </label>
        <select class="form-control"
                ng-options="et.display_name for et in vm.event_types track by et.name"
                ng-change="vm.search()"
                ng-model="vm.filter_options.event_type"
                ng-disabled="!vm.data_source"
                title="Select the data source to enable filters"></select>
        <label> Start date </label>
        <input type="date"
              class="form-control"
              ng-model="vm.filter_options.start_date"
              ng-change="vm.search()"
              ng-disabled="!vm.data_source"
              title="Select the data source to enable filters">
        <label> End date </label>
        <input type="date"
              class="form-control"
              ng-model="vm.filter_options.end_date"
              ng-change="vm.search()"
              ng-disabled="!vm.data_source"
              title="Select the data source to enable filters">
              </div>
          <div class="external-data-checkbox"  ng-show="!vm.show_external_filters">
            <input type="checkbox" id="showExternalCheckbox" ng-click="vm.show_external_filters = true; vm.ot_data_source = false;"
            ng-model="vm.show_external_filters">
            <label for="showExternalCheckbox">
              <i class="ds-icon-Expand unchecked-icon"></i>
              <h4>
                <u>
              View External Dataset Filters
            </u>
            </h4>
            </label>
          </div>
        <div ng-show="vm.show_external_filters">
          <div class="external-data-checkbox"  ng-show="vm.show_external_filters">
            <input type="checkbox" id="hideExternalCheckbox" ng-click="vm.show_external_filters = false; vm.ot_data_source = false; vm.clear_filters();"
            ng-model="vm.show_external_filters">
            <label for="hideExternalCheckbox">
              <h4>
                <u>
              Hide External Dataset Filters
            </u>
            </h4>
            </label>
          </div>
        <ul>
        <div class="data_source">
      <input type="checkbox"
            ng-change="vm.search()"
            ng-model="vm.ot_data_source">
      <label class="external_datasource_listing"> OpenTopography Data </label>
    </div>
    <div class="filter-options">
        <label> Keyword search<span class="info-icon" data-tooltip="Keywords typically include: title terms, location details, type of events, index terms associated with the datasets"> (i)</span></label> </label>
        <input type="text" 
              class="form-control" 
              ng-model="vm.opentopo_filter_options.keyword" 
              ng-change="vm.debouncedSearch()"
              ng-disabled="!vm.ot_data_source"
              title="Select the data source to enable filters"></input>
        <label> Start date </label>
        <input type="date"
              class="form-control"
              ng-model="vm.opentopo_filter_options.ot_start_date"
              ng-change="vm.search()"
              ng-disabled="!vm.ot_data_source"
              title="Select the data source to enable filters">
        <label> End date </label>
        <input type="date"
              class="form-control"
              ng-model="vm.opentopo_filter_options.ot_end_date"
              ng-change="vm.search()"
              ng-disabled="!vm.ot_data_source"
              title="Select the data source to enable filters">
      </div>
      <div class="data_source">
    <input type="checkbox"
          ng-change="vm.search()"
          ng-model="vm.ot_data_source">
    <label class="external_datasource_listing"> External Data Source 2 </label>
  </div>
  <div class="filter-options">
      <label> Keyword search<span class="info-icon" data-tooltip="Keywords typically include: title terms, location details, type of events, index terms associated with the datasets"> (i)</span></label> </label>
      <input type="text" 
            class="form-control" 
            ng-model="vm.opentopo_filter_options.keyword" 
            ng-change="vm.debouncedSearch()"
            ng-disabled="!vm.ot_data_source"
            title="Select the data source to enable filters"></input>
      <label> Start date </label>
      <input type="date"
            class="form-control"
            ng-model="vm.opentopo_filter_options.ot_start_date"
            ng-change="vm.search()"
            ng-disabled="!vm.ot_data_source"
            title="Select the data source to enable filters">
      <label> End date </label>
      <input type="date"
            class="form-control"
            ng-model="vm.opentopo_filter_options.ot_end_date"
            ng-change="vm.search()"
            ng-disabled="!vm.ot_data_source"
            title="Select the data source to enable filters">
  </div>
  </div>
      <div class="filter-options">
    <button class="btn btn-xs btn-info clear-btn" ng-click="vm.clear_filters()"> Clear </button>
    <button class="btn btn-xs btn-default hide-btn" ng-click="vm.show_filter_options=false"> Hide </button>
  </div>
  </div>
</ul>
  </div>
  <div id="show_sidebar_handle" ng-show="!vm.show_sidebar" ng-click="vm.show_sidebar = !vm.show_sidebar">
    <div class="sidebar-handle"
         uib-tooltip="Expand sidebar"
         tooltip-placement="right">
      <i role="none" class="fa fa-chevron-right"> </i>
    </div>
  </div>
  <div id="sidebar" ng-show="vm.show_sidebar" class="slide-in">
    <div class="sidebar-handle"
         ng-click="vm.show_sidebar = !vm.show_sidebar"
         uib-tooltip="Collapse sidebar"
         tooltip-placement="right">
      <i role="none" class="fa fa-chevron-left"> </i>
    </div>
    <div class="sidebar-content">
      <div style="padding-left:10px;">
          <a href="/rw/user-guides/tools-applications/recon-portal/"><i role="none" class="fa fa-question-circle"></i> <b>Learn more about contributing.</b></a>
      </div>
      <div ng-show="vm.active_rapid_event" class="fade recon-event-details">
        <div class="text-center">
          <span class="filter-options-button" ng-click="vm.reset()"> Back to results </span>
        </div>
        <event-listing-detailed event="vm.active_rapid_event"></event-listing-detailed>
      </div>
      <div class="search-container sb-row" ng-show="!vm.active_rapid_event">
        <div class="event-search">
          <div class="input-group">
            <input type="text" class="form-control" ng-model="vm.filter_options.search_text" ng-change="vm.debouncedSearch()"></input>
            <span class="input-group-btn">
              <button class="btn btn-default"> <i role="none" class="fa fa-trash" ng-click="vm.clear_filters()"></i></button>
            </span>
          </div>
        </div> 
      </div>
      <div ng-show="!vm.active_rapid_event" class="event-results sb-row">
        <div ng-show="vm.filtered_events" class="">
          <event-listing ng-show="vm.data_source" ng-repeat="event in vm.filtered_events" event=event ng-click="vm.select_event(event)"></event-listing>
          <event-listing ng-show="vm.ot_data_source" ng-repeat="event in vm.filtered_openTopoData" event=event ng-click="vm.select_event(event)"></event-listing>
        </div>
        <div ng-show="!vm.filtered_events" class="">
          <event-listing ng-show="vm.data_source" ng-repeat="event in vm.events" event=event ng-click="vm.select_event(event)"></event-listing>
          <event-listing ng-show="vm.ot_data_source" ng-repeat="event in vm.openTopoData" event=event ng-click="vm.select_event(event)"></event-listing>
        </div>
      </div>
    </div>
  </div> <!-- ends sidebar -->
  <div id="map"></div>
</div>
</div>
